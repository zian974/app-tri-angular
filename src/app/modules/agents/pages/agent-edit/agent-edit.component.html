<nav aria-label="breadcrumb">
  <ol class="breadcrumb text-upper-small">
    <li class="breadcrumb-item"><a [routerLink]="['/agents']">Agents</a></li>
    <li class="breadcrumb-item active" aria-current="page">Agent</li>
  </ol>
</nav>

<div class="header">
  <div class="header-body">
    <div class="row align-items-center">
      <div class="col">
        <h1 class="header-title text-truncate">
          <ng-container *ngIf="agentForm.id?.value; else newAgent">
            Fiche
          </ng-container>
          <ng-template #newAgent> Nouveau </ng-template>
        </h1>
      </div>
      <div class="col-auto">
        <button type="button" label="Delete" class="btn btn-danger ms-2 d-flex" (click)="deleteItem()"
                [disabled]="!data.agent.id">
          <span class="material-symbols-outlined">
            delete_forever
          </span>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <form name="stagiaireForm" [formGroup]="agentForm.fg" (ngSubmit)="submitItem()">

      <p class="text-required"><small class="text-muted">Les champs suivis d'un <span class="text-danger">*</span> sont obligatoires.</small></p>
      <div class="row col-md-6">


          <!-- Nom-->
          <div class="form-group col-md-6 mb-3">
            <label for="nom" class="form-label required">Nom</label>
            <input type="text" class="form-control" id="nom"
                  formControlName="nom" required>

            <div  *ngIf="(agentForm.nom?.invalid && (agentForm.nom?.dirty || agentForm.nom?.touched))"
                  class="invalid-feedback d-block">
              <div *ngIf="agentForm.nom?.errors?.['required']">
                Veuillez saisir un nom
              </div>
            </div>
          </div>

          <!-- Prénom -->
          <div class="form-group col-md-6 mb-3">
            <label for="prenom" class="form-label required">Prénom</label>
            <input type="text" class="form-control" id="prenom"
                  formControlName="prenom" required>

            <div  *ngIf="(agentForm.prenom?.invalid && (agentForm.prenom?.dirty || agentForm.prenom?.touched))"
                  class="invalid-feedback d-block">
              <div *ngIf="agentForm.prenom?.errors?.['required']">
                Veuillez saisir un prénom
              </div>
            </div>
          </div>

      </div>

      <div class="row col-md-6 flex-column " >

        <!-- Email -->
        <div class="col-md-6 form-group mb-3">
          <label for="email" class="form-label required">Email</label>
          <input type="email" class="form-control" id="email" name="email"
                 formControlName="email" required>

          <div  *ngIf="(agentForm.email?.invalid && (agentForm.email?.dirty || agentForm.email?.touched))"
                 class="invalid-feedback d-block">
            <div *ngIf="agentForm.email?.errors?.required">
              Veuillez saisir un email
            </div>
            <div *ngIf="agentForm.email?.errors?.email">
              L'email est invalide
            </div>
          </div>
        </div>

        <!-- Abréviation -->
        <div class="col-md-6 form-group mb-3">
          <label for="abbr" class="form-label required">Abréviation</label>
          <input type="text" class="form-control" id="abbr" name="abbr"
                 formControlName="abbr" required>

          <div  *ngIf="(agentForm.abbr?.invalid && (agentForm.abbr?.dirty || agentForm.abbr?.touched))"
                 class="invalid-feedback d-block">
            <div *ngIf="agentForm.abbr?.errors?.required">
              Veuillez saisir une abréviation
            </div>
            <div *ngIf="agentForm.abbr?.errors?.pattern">
              L'abréviation est invalide
            </div>
          </div>
        </div>

      </div>

      <button type="submit" class="btn btn-primary">Enregistrer</button>

    </form>
  </div>
</div>
<app-spinner></app-spinner>
